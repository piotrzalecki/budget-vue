Ticket — “TransactionFormDrawer”

(Epic 4 – CRUD Endpoints)

This task builds the side-drawer form used to create or edit a single transaction. It slides in from the right (or bottom on mobile), re-uses Vuetify components, and talks to the Pinia store / API.

Deliverable	Details
Drawer component file	src/components/TransactionFormDrawer.vue
Props	open (Boolean) – controls visibility  editId (Number | null) – if non-null, load existing txn for editing
Emits	save(payload), close()
Fields	• Amount (MoneyInput with £ prefix)  • Date (v-date-picker inline)  • Tags (TagMultiSelect chips)  • Note (v-text-field multiline)
Validation	All fields require client-side rules (amount ≠ 0, date present). Use Vuetify v-form + rules.
UX	• Opens with width 400 px, full-height on desktop; switches to full-screen modal on <600 px screens via mobile-breakpoint="960" prop.  • Submit button disabled until form valid.  • Pressing Enter in any field triggers save.
Loading state	Show skeleton loader while fetching existing txn (edit mode).
Integration	Parent page (TransactionsPage) controls open and handles save event → calls Pinia action (transactions.add or transactions.update).
Unit test	• Renders correct initial values in edit mode.  • Emits save with parsed pence amount.  • Required fields cause validation errors.


⸻

Template sketch

<v-navigation-drawer
  v-model="isOpen"
  location="right"
  width="400"
  temporary
>
  <v-card flat>
    <v-card-title>{{ editMode ? 'Edit' : 'Add' }} Transaction</v-card-title>

    <v-card-text>
      <v-form ref="form" v-model="valid">
        <MoneyInput v-model="amount"  :error-messages="err.amount"/>
        <v-date-picker v-model="tDate" color="primary" />
        <TagMultiSelect v-model="tagIds" />
        <v-text-field v-model="note" label="Note" rows="2" multiline />
      </v-form>
    </v-card-text>

    <v-card-actions class="justify-end">
      <v-btn text  @click="$emit('close')">Cancel</v-btn>
      <v-btn :disabled="!valid" color="primary" @click="onSave">
        {{ editMode ? 'Update' : 'Save' }}
      </v-btn>
    </v-card-actions>
  </v-card>
</v-navigation-drawer>

MoneyInput converts pounds ↔ pence; TagMultiSelect pulls tag list from Pinia.

⸻

Acceptance Criteria
	1.	Drawer slides in/out smoothly and is responsive.
	2.	Form validation blocks save until required fields are filled.
	3.	Fires save({...}) with { amount_pence, t_date, tag_ids, note }.
	4.	Editing an existing txn pre-populates fields and updates on save.
	5.	Unit test passes in CI.

When these conditions are met, “TransactionFormDrawer” is done.